<template>
  <div id="app">
    <mapcan name="mainmap" :center="[100,31]" :zoom="4" style="height:100%">
      <tilelayer slot="baselayer" :id="`googlelayer`" url-template="/maptiles/vt?lyrs=y@852&gl=cn&t=y&x={x}&y={y}&z={z}"></tilelayer>
      <vectorlayer :id="`featurelayer`">
        <geometry v-for="plane in planeList" :id="plane.feature.id" :key="plane.id"
        :json="plane" :symbol="makeSymbol(plane.symbol)" @click="setSelected(plane)"/>
      </vectorlayer>
      <uicomponent :position={top:10,left:10}>
        <filterwrap></filterwrap>
      </uicomponent>
      <uicomponent :position={top:10,right:10}>
        <RelevantInformation v-if="show_RelevantInformation_boolean" :targetr_type="targetr_type" :targetr_id="targetr_id"></RelevantInformation>
      </uicomponent>
      <uicomponent :position={bottom:10,left:10}>
        <TargetrDetail v-if="show_TargetrDetail_boolean" :targetr_type="targetr_type" :targetr_id="targetr_id" @close_TargetrDetail = "close_TargetrDetail"></TargetrDetail>
        <div>
          <button @click="show_TargetrDetail('airplane')">飞机</button>
          <button @click="show_TargetrDetail('ship')">船舶</button>
          <button @click="show_TargetrDetail('satellite')">卫星</button>
          <!-- <button @click="show_TargetrDetail('airplane')">浮标</button> -->
        </div>
      </uicomponent>
    </mapcan>
  </div>
</template>

<script>
// import ax from 'axios'
import Mapcan from './components/MapControl'
import Tilelayer from './components/Tilelayer'
import Vectorlayer from './components/Vectorlayer'
import Geometry from './components/Geometry'
import Uicomponent from './components/UIComponent'
import filterwrap from './components/filter.vue'
import TargetrDetail from './components/TargetrDetail/TargetrDetail'
import RelevantInformation from './components/RelevantInformation/RelevantInformation'
import { mapState, mapMutations } from 'vuex'
export default {
  name: 'app',
  components: { Mapcan, Tilelayer, Vectorlayer, Geometry, Uicomponent, filterwrap, TargetrDetail, RelevantInformation },
  data() {
    return {
      show_TargetrDetail_boolean: false,
      show_RelevantInformation_boolean: false,
      targetr_type: 'airplane', // 下弹窗展示类型
      targetr_id: '0' // 下弹窗展示类型的id
    }
  },
  computed: {
    ...mapState(['planeList'])
  },
  methods: {
    ...mapMutations(['setSomeState']),
    setSelected(t) {
      this.setSomeState(['selectedTarget', t])
      this.show_TargetrDetail_boolean = true
    },
    makeSymbol(symb) {
      Object.assign(symb, {
        'markerType': 'path',
        'markerPathWidth' : 1024,
        'markerPathHeight' : 1024,
        'markerFill': '#6fa8dc',
        'markerWidth': 20,
        'markerHeight': 20,
        // markerPath: [{ path: 'M995.679767 237.181951c-8.943231 1.490539-23.848617 2.981077-44.716157 4.471615-73.03639 8.943231-207.184862 26.829694-295.126638 38.754003l-19.377001 5.962154h-2.981077l-44.716157 13.414848c-4.471616-90.922853-10.43377-166.94032-17.886463-225.071325v-10.43377l22.358078-10.43377 70.055313-32.791849c2.981077-1.490539 4.471616-4.471616 4.471616-7.452693l1.490539-55.149927v-4.471615c0-2.981077-1.490539-5.962154-4.471616-4.471616l-114.77147 19.377001c-8.943231-22.358079-17.886463-34.282387-31.30131-35.772925h-1.490539c-13.414847 0-23.848617 11.924309-31.30131 35.772925l-114.77147-17.886463c-2.981077 0-4.471616 1.490539-4.471616 4.471616v4.471616l1.490539 55.149927c0 2.981077 1.490539 5.962154 4.471615 7.452693l70.055313 32.791849 22.358079 10.43377V76.203785c-5.962154 58.131004-10.43377 134.148472-14.905386 225.071324l-46.206696-13.414847h-4.471615l-19.377002-4.471616c-87.941776-10.43377-222.090247-26.829694-295.126637-35.772925-20.86754-2.981077-35.772926-4.471616-44.716158-4.471616-23.848617-2.981077-25.339156 26.829694-7.452692 37.263464 2.981077 1.490539 56.640466 29.810771 123.714701 67.074236v38.754003c0 14.905386 11.924309 26.829694 26.829695 26.829694s26.829694-11.924309 26.829694-26.829694v-8.943232c40.244541 20.86754 81.979622 43.225619 119.243086 64.093159v44.716157c0 14.905386 11.924309 26.829694 26.829694 26.829695s26.829694-11.924309 26.829694-26.829695v-14.905385c23.848617 11.924309 43.225619 23.848617 56.640466 31.30131-1.490539 174.393013 11.924309 308.541485 61.112082 332.390101 2.981077 1.490539 4.471616 1.490539 7.452693 2.981078 1.490539 0 4.471616 0 5.962154 1.490538h5.962154c1.490539 0 4.471616 0 5.962154-1.490538 2.981077 0 4.471616-1.490539 7.452693-2.981078 49.187773-23.848617 62.60262-157.997089 58.131005-332.390101 13.414847-7.452693 32.791849-17.886463 55.149927-29.810772v14.905386c0 14.905386 11.924309 26.829694 26.829694 26.829694s26.829694-11.924309 26.829695-26.829694v-44.716157c37.263464-20.86754 78.998544-43.225619 119.243085-65.583698V389.216885c0 14.905386 11.924309 26.829694 26.829695 26.829694s26.829694-11.924309 26.829694-26.829694v-44.716157c68.564774-37.263464 122.224163-67.074236 123.714702-68.564775 25.339156-10.43377 23.848617-41.73508-1.490539-38.754002z' }],
        markerPath: [{ path: 'M934.603175 738.336508l-139.784127 139.784127c-19.504762 19.504762-50.387302 19.504762-68.266667 0l-203.174603-203.174603c-19.504762-19.504762-19.504762-50.387302 0-68.266667l55.263492-55.263492-27.631746-27.631746-17.879365 17.879365c-26.006349 26.006349-60.139683 37.384127-92.647619 37.384127-43.885714 35.75873-100.774603 40.634921-133.28254 8.126984-32.507937-32.507937-27.631746-89.396825 8.126984-133.28254 0-34.133333 11.377778-66.64127 37.384127-92.647619l17.879365-17.879365-27.631746-27.631746-55.263492 55.263492c-19.504762 19.504762-50.387302 19.504762-68.266667 0l-203.174603-203.174603c-19.504762-19.504762-19.504762-50.387302 0-68.266666l139.784127-139.784127c19.504762-19.504762 50.387302-19.504762 68.266667 0l203.174603 203.174603c19.504762 19.504762 19.504762 50.387302 0 68.266666l-47.136508 47.136508 27.631746 27.631746 61.76508-61.765079c16.253968 37.384127 42.260317 74.768254 74.768254 107.27619 32.507937 32.507937 69.892063 58.514286 107.27619 74.768254l-61.765079 61.76508 27.631746 27.631746 47.136508-47.136508c19.504762-19.504762 50.387302-19.504762 68.266666 0l203.174603 203.174603c17.879365 17.879365 17.879365 48.761905-1.625396 66.64127zM887.466667 387.250794c-3.250794 3.250794-8.126984 6.501587-11.377778 8.126984 0 0-1.625397 0-1.625397 1.625397-3.250794 1.625397-4.87619 3.250794-8.126984 4.87619h-1.625397c-79.644444 43.885714-203.174603 13.003175-294.196825-78.019048-92.647619-92.647619-121.904762-214.552381-78.019048-294.196825 1.625397-3.250794 3.250794-4.87619 4.876191-8.126984 0 0 0-1.625397 1.625396-1.625397 3.250794-4.87619 6.501587-8.126984 8.126985-11.377778 34.133333-22.755556 110.526984 6.501587 191.796825 71.517461l-40.634921 32.507936c-48.761905-39.009524-87.771429-60.139683-99.149206-50.387301-14.628571 14.628571 34.133333 87.771429 108.901587 162.539682s147.911111 123.530159 162.539683 108.901587c9.752381-9.752381-8.126984-43.885714-42.260318-87.771428l32.507937-40.634921c61.765079 78.019048 89.396825 149.536508 66.64127 182.044445zM692.419048 169.447619c-13.003175 9.752381-13.003175 27.631746-1.625397 39.009524l4.87619 4.87619c11.377778 11.377778 29.257143 9.752381 39.009524-1.625396l43.885714-53.638096c9.752381-13.003175 9.752381-32.507937-1.625396-43.885714l14.628571 14.628571c-11.377778-11.377778-30.88254-13.003175-43.885714-1.625396l-55.263492 42.260317zM797.61473 147.53727c-20.691302 0-37.920508-17.229206-39.07454-36.78273 0-20.691302 16.091429-36.78273 39.07454-36.78273 20.691302 0 39.07454 16.091429 39.07454 36.78273-1.137778 21.845333-18.383238 36.78273-39.07454 36.78273M894.163302 147.53727c0-34.490921-13.799619-66.657524-40.228572-90.794667-25.291175-25.291175-58.61181-37.936762-95.410793-37.936762v-52.874158c105.748317 0 189.651302 81.594921 190.805333 181.605587h-55.165968M991.849651 148.675048c0-121.823492-104.594286-221.817905-233.309461-221.817905v-52.857905c158.606222 0 288.475429 122.977524 288.475429 274.692064h-55.165968' }],
        markerVerticalAlignment: 'middle',
        markerHorizontalAlignment: 'middle'
      })
      return [symb]
    },
    // 关闭下弹窗
    close_TargetrDetail() {
      this.show_TargetrDetail_boolean = false
    },
    // 展开弹窗
    show_TargetrDetail(type) {
      this.targetr_type = type
      this.targetr_id = this.targetr_id + '-1'
      this.show_TargetrDetail_boolean = true
      this.show_RelevantInformation_boolean = true
    }
  },
  mounted () {
  }
}
</script>

<style lang="scss">

html,body{
  height: 100%;
  width: 100%;
  overflow: hidden;
  margin: 0;
  padding: 0;
}
#app {
  height: 100%;
  width: 100%;
  /*.ivu-tag-geekblue .ivu-tag-text {*/
    /*color: #fff !important;*/
  /*}*/
}
.ivu-tabs-nav .ivu-tabs-tab-active{
  color: #fff !important;
}
.ivu-tabs-ink-bar{
  background-color: #fff !important;
}
.ivu-tabs-tab{
  color: #fff;
  background: transparent !important;
}

.ivu-tabs-nav .ivu-tabs-tab:hover {
  color: #FFF !important;
}
</style>
